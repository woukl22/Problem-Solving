# [1662-압축](https://www.acmicpc.net/problem/1662)

## 오답노트

### 문제
```
// 문제
압축되지 않은 문자열 S가 주어졌을 때,
이 문자열중 어떤 부분 문자열은 K(Q)와 같이 압축 할 수 있다.
K는 한자리 정수이고, Q는 0자리 이상의 문자열이다.
이 Q라는 문자열이 K번 반복된다는 뜻이다.
압축된 문자열이 주어졌을 때,
이 문자열을 다시 압축을 푸는 프로그램을 작성하시오.

// 입력
첫째 줄에 압축된 문자열 S가 들어온다.
S의 길이는 최대 50이다.
문자열은 (, ), 0-9사이의 숫자로만 들어온다.

// 출력
첫째 줄에 압축되지 않은 문자열의 길이를 출력한다.
이 값은 2,147,473,647 보다 작거나 같다.

```
<br>

```
// 예제 입력 1
33(562(71(9)))

// 예제 출력
19
```

<br>

<br>

### 내 접근 방법
1. 우선 문제를 이해하는데 시간이 조금 걸렸다.<br>
K(Q)로 압축된 상태에서 K는 한 자리 수라는 부분에서 이해를 할 수 있었다.<br>
예제 입력 1을 풀이하면 이렇게 된다.
```
33(562(71(9)))
=> 33(562(79))
=> 33(567979)
=> 3567979567979567979

따라서 총 19자리가 된다.
```

<br>


2. 가장 안쪽의 괄호부터 밖으로 꺼내야 한다는 생각에 재귀를 사용하면 되겠다고 생각했다.<br>
아래의 방식으로 일단 전체 문자열을 만들고 나서 ```문자열.size()```를 통해 결과를 출력하려고 했다.
```
문자열에 괄호가 있으면
문자열을 재귀문에 다시 넣고 반환된 값을 괄호 앞의 숫자만큼 문자열에 더해준다.

문자열에 괄호가 없으면
문자열을 반환한다.
```
위 방법은 메모리 초과로 인해서, 여러 방법으로 구현해봐도 해결이 안돼서 다른 방법을 찾기로 했다.


<br>

3. 두 번째 방법은 문자열의 길이만 계산하는 방법이었다.<br>
재귀 방법은 똑같이 가져가면서 문자열을 만들고 길이를 출력하는 게 아니라, 처음부터 문자열의 길이를 계산했다.
```
괄호 안에 있는 숫자의 길이와 괄호 앞의 수를 곱하는 걸 반복했다.
```

이 방법을 사용하니 메모리 초과는 해결할 수 있었다.<br>
하지만 문제는 예제 입력 6번에서 결과가 다르게 출력되었다.<br>
괄호 안에 괄호가 있는 경우는 잘 출력되었지만,<br>
예제 입력 6번처럼 괄호가 따로 있는 경우에 문제가 발생했다.
```
// 예제 입력 6
1()66(5)

// 예제 출력 6
7

// 내 출력값
8
=> 재귀를 통해 길이를 구할 때, 문자열이 '6555555'가 아닌')65555'가 되어 ')' 때문에 문자열의 길이가 더 많아졌다.
```

4. 3번의 방법에서 맨 앞에 ')'가 오는 경우에 ')'를 제거한 문자열로 바꿔주도록 하여 예제 출력 6번도 올바르게 작동하는 코드를 작성했지만, 제출했더니 틀렸다고 나왔다.<br>
```12(13(234)32(266))```처럼 괄호 안에 여러 개의 괄호가 따로 들어있는 경우에 값을 제대로 계산하지 못했던 것 같다.<br>
2, 3시간 정도 문제를 잡고 있었음에도 풀리지 않아 다른 사람의 코드를 참고하여 방법을 알아보기로 했다. <br>

<br>


## 풀이
참고한 블로그: https://jaimemin.tistory.com/1264

<br>

c++에 익숙하지 않아서 STL에 있는 스택을 사용할 생각을 못했다.<br>
그리고 이번에 코드를 보면서 이렇게도 풀 수 있구나를 알 수 있었다.<br>
이번 문제는 제출하지 않고, 다음 번에 다시 풀어봐야겠다.<br>

```
기본 개념
1. 스택을 이용한 전처리
2. 재귀를 이용하여 길이 확인

전역 변수로 문자열과 배열을 만들어주었고,
배열의 길이는 문제에 나온 S의 최대 길이인 50으로 설정했다.
int visited[50];


전처리 과정: stack을 이용하여 visited 배열에 괄호의 위치를 저장했다.
1. 문자열의 길이만큼 반복
2. 문자열의 i번째 문자가 '('인 경우 stack.push(i)를 한다.
3. 문자열의 i번째 문자가 ')'인 경우 visited[stack.top()] = i를 하고 stack.pop()을 한다.
=> visited['('의 인덱스] = ')'의 인덱스; 괄호의 시작을 알면 끝을 알 수 있다.


재귀 과정: 전처리를 통해 만든 visited 배열과 재귀를 사용하여 괄호 안의 문자 길이를 계산했다.
int func(int start, int end){}
1. 시작부터 끝까지 반복
2. 문자열의 i번째 문자가 '('인 경우
    2-1. K값을 구한다. (s[i-1])
    2-2. 괄호 안의 값을 재귀로 돌리고, K값과 곱해서 결과에 더해준다. 
    이때, ')'의 인덱스는 visited[i]로 찾을 수 있다.
    2-3. 뒤에 또 다른 괄호가 나올 수 있으니 continue를 통해 for문을 진행한다.
3. 문자열이 숫자인 경우 결과값을 1씩 올려준다.
4. 결과를 반환한다.
```

한 문제를 가지고 이렇게 오래 씨름해 본 건 처음인 것 같다.<br>
직접 풀지는 못했지만, 이번 풀이를 통해 다음 번에는 스택도 잘 활용해보고<br>
문제도 더 잘 풀어보고 싶다.